<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Perfume List</title>
    <link rel="icon" type="image/png" href="icon/32.png" />
    <link rel="apple-touch-icon" href="icon/180.png" />

    <style>
      /* Reset */
      a {
        color: black;
        font-weight: bold;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        background: #fff;
        color: #222;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* 1. æœç´¢æ  (Search Bar) - å–æ¶ˆå¸é¡¶ */
      .search-container {
        max-width: 600px;
        margin: 20px auto; /* æ¢å¤ä¸Šä¸‹è¾¹è· */
        padding: 0 15px;
        position: relative; /* æ”¹å›é»˜è®¤å®šä½ */
      }
      #search-input {
        width: 100%;
        padding: 12px 40px 12px 20px;
        font-size: 1.1rem;
        border: 1px solid #ccc;
        border-radius: 25px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
      }
      #search-input:focus {
        border-color: #333;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }
      #search-clear-btn {
        position: absolute;
        top: 50%;
        right: 30px;
        transform: translateY(-50%);
        background: #ccc;
        color: white;
        border: none;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        cursor: pointer;
        font-weight: bold;
        font-size: 16px;
        display: none;
        align-items: center;
        justify-content: center;
        line-height: 22px;
        transition: background-color 0.2s;
      }
      #search-clear-btn:hover {
        background: #999;
      }

      /* --- Navbar Styles (Fixed & Beautified) --- */
      .navbar {
        /* 1. å¸ƒå±€ä¸æ»šåŠ¨ (Layout & Scroll) */
        display: flex;
        justify-content: flex-start; /* ä»å·¦å¼€å§‹ï¼Œé…åˆæ¨ªå‘æ»‘åŠ¨ */
        flex-wrap: nowrap; /* ç¦æ­¢æ¢è¡Œï¼Œå¼ºåˆ¶æ¨ªæ’ */
        overflow-x: auto; /* å…è®¸æ¨ªå‘æ»šåŠ¨ */
        gap: 10px; /* æŒ‰é’®ä¹‹é—´çš„é—´è· */

        /* 2. å¸é¡¶æ•ˆæœ (Sticky Effect) */
        position: sticky;
        top: 0;
        z-index: 100;
        margin-top: 0;

        /* 3. è§†è§‰æ ·å¼ (Visuals) */
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.95); /* åŠé€æ˜èƒŒæ™¯ */
        backdrop-filter: blur(10px); /* ç£¨ç ‚ç»ç’ƒè´¨æ„Ÿ */
        border-bottom: 1px solid #eee;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03); /* è½»å¾®é˜´å½±ï¼Œå¢åŠ å±‚æ¬¡æ„Ÿ */

        /* 4. æ»šåŠ¨ä½“éªŒä¼˜åŒ– */
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none; /* Firefox éšè—æ»šåŠ¨æ¡ */
        cursor: grab; /* é¼ æ ‡å˜ä¸ºå°æ‰‹ */
      }

      .navbar:active {
        cursor: grabbing;
      }

      /* éšè— Chrome/Safari æ»šåŠ¨æ¡ */
      .navbar::-webkit-scrollbar {
        display: none;
      }

      /* æŒ‰é’®æ ·å¼ (æ‰¾å›äº†åœ†è§’å’Œé¢œè‰²) */
      .navbar button {
        /* å¸ƒå±€å±æ€§ */
        flex: 0 0 auto; /* é˜²æ­¢æŒ‰é’®è¢«æŒ¤å‹å˜å½¢ */
        margin: 0; /* å»æ‰ marginï¼Œæ”¹ç”¨ gap æ§åˆ¶é—´è· */
        white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ¢è¡Œ */

        /* å¤–è§‚å±æ€§ (æ¢å¤ä¹‹å‰çš„æ ·å¼) */
        background: #f8f8f8;
        border: 1px solid #e0e0e0;
        padding: 8px 18px;
        cursor: pointer;
        font-size: 0.95rem;
        font-weight: 500;
        border-radius: 25px; /* åœ†æ¶¦çš„è¯ä¸¸å½¢çŠ¶ */
        color: #555;
        transition: all 0.2s ease;
      }

      /* é¼ æ ‡æ‚¬åœ */
      .navbar button:hover {
        background: #eee;
        border-color: #ccc;
        transform: translateY(-1px); /* å¾®å¾®ä¸Šæµ® */
      }

      /* é€‰ä¸­çŠ¶æ€ (é»‘åº•ç™½å­—) */
      .navbar button.active {
        background: #222;
        color: #fff;
        border-color: #222;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      /* --- Gallery Styles --- */
      .gallery {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 10px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 25px;
        min-height: 300px; /* Give gallery some height while loading */
      }
      @media (min-width: 768px) {
        .gallery {
          grid-template-columns: repeat(4, 1fr);
          gap: 40px;
          padding: 0 20px;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.98);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .item {
        position: relative;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        background: #fff;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: fadeIn 0.5s ease-out;
      }
      .item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      /* --- !!! é—œéµä¿®æ”¹ï¼šéš±è—ç¼ºè²¨å•†å“ !!! --- */
      .item[data-stock="0"] {
        display: none; /* ç›´æ¥éšè—ï¼Œä¸å ç”¨ç©ºé—´ */
      }

      .item[data-stock="0"]::after {
        content: "Out of Stock";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: bold;
        z-index: 2;
      }
      .item .add-to-cart {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: background 0.3s ease;
        z-index: 3;
      }
      .item .add-to-cart:hover {
        background: rgba(0, 0, 0, 0.9);
      }
      .item-cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: #f44;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 0.8rem;
        min-width: 1.2em;
        text-align: center;
        display: none;
      }
      .item img {
        display: block;
        width: 100%;
        height: 250px;
        object-fit: cover;
        vertical-align: middle;
        border-radius: 12px 12px 0 0;
      }
      .caption {
        background: #fff;
        color: #333;
        padding: 16px;
        font-size: 1rem;
        font-weight: 600;
        text-align: center;
        border-top: 1px solid #eee;
        min-height: 90px;
        display: flex;
        flex-direction: column; /* è®©ä»·æ ¼æ˜¾ç¤ºåœ¨åå­—ä¸‹æ–¹ */
        align-items: center;
        justify-content: center;
      }
      .hidden {
        display: none !important;
      }
      .no-results-message {
        grid-column: 1 / -1;
        text-align: center;
        padding: 40px 15px;
        font-size: 1.1rem;
        color: #777;
      }
      .no-results-message p {
        margin: 5px 0;
      }

      /* --- Loading State Spinner --- */
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .gallery-loader {
        grid-column: 1 / -1;
        margin: 80px auto;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #333;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
      }

      /* --- Price Info --- */
      .price-info {
        max-width: 600px;
        margin: 0 auto 25px auto;
        padding: 20px;
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        text-align: center;
      }
      .price-info p {
        margin: 8px 0;
        font-size: 1rem;
        color: #333;
        font-weight: 500;
      }
      .TOP {
        text-align: center;
      }

      /* --- Modal Styles --- */
      .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.85);
        justify-content: center;
        align-items: center;
        padding: 15px;
      }
      .modal.open {
        display: flex;
      }
      .modal-content {
        max-width: 90vw;
        max-height: 90vh;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 40px rgba(255, 255, 255, 0.25);
        background: #fff;
        text-align: center;
      }
      .modal-content img {
        max-width: 100%;
        max-height: 80vh;
        display: block;
      }
      .modal-caption {
        padding: 12px 20px;
        font-weight: 700;
        font-size: 1.2rem;
        color: #222;
      }
      .modal-close {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2rem;
        color: #fff;
        cursor: pointer;
        user-select: none;
        transition: transform 0.3s ease;
      }
      .modal-close:hover {
        transform: rotate(90deg);
      }

      /* --- Footer & Controls --- */
      .contact-info {
        text-align: center;
        padding: 30px 15px;
        background: #fff;
        margin-top: 20px;
        border-top: 1px solid #eee;
      }
      .contact-info p {
        margin: 5px 0;
        font-size: 1.1rem;
        color: #555;
      }
      /* å›åˆ°é¡¶éƒ¨æŒ‰é’® - å¼ºåˆ¶å›ºå®šåœ¨å·¦ä¸‹è§’ */
      .back-to-top {
        display: none; /* é»˜è®¤éšè—ï¼Œæ»‘åŠ¨åæ˜¾ç¤º */
        position: fixed;
        bottom: 30px; /* è·ç¦»åº•éƒ¨ */
        left: 30px; /* ğŸ”´ æ”¹ä¸º leftï¼Œå›ºå®šåœ¨å·¦ä¾§ */
        right: auto; /* æ¸…é™¤å³ä¾§å®šä½ */
        background-color: #333;
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 1.5rem;
        line-height: 50px;
        text-align: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s;
        z-index: 1000;
        opacity: 0.8;
      }

      .back-to-top:hover {
        background-color: #555;
        opacity: 1;
        transform: scale(1.1);
      }
      .cart-button {
        position: fixed;
        bottom: 30px;
        right: 20px; /* æ”¹ä¸ºå³ä¾§ (Thumb Zone) */
        left: auto;
        background-color: #ffffff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 60px; /* ç¨å¾®åŠ å¤§ */
        height: 60px;
        font-size: 1rem;
        text-align: center;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        transition: background-color 0.3s;
      }
      .cart-button:hover {
        background-color: #555;
      }
      .cart-button.added {
        animation: cart-pulse 0.6s ease-out;
      }
      @keyframes cart-pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.15);
        }
        100% {
          transform: scale(1);
        }
      }
      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: #f44;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 0.8rem;
      }
      .cart-icon {
        width: 32px;
        height: 32px;
      }
      .add-to-cart-confirmation {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #28a745;
        color: white;
        padding: 6px 12px;
        border-radius: 15px;
        font-size: 0.9rem;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.5s ease, transform 0.5s ease;
        z-index: 10;
        pointer-events: none;
      }
      .add-to-cart-confirmation.show {
        opacity: 1;
        transform: translate(-50%, -100%);
      }

      /* --- Modal Controls --- */
      .modal-controls {
        padding: 10px 20px 20px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .modal-add-btn {
        background-color: #333;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 1rem;
        font-weight: bold;
        border-radius: 25px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .modal-add-btn:hover {
        background-color: #555;
      }
      .modal-qty-controls {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      .modal-qty-btn {
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .modal-qty-btn:hover {
        background-color: #e0e0e0;
      }
      .modal-qty-count {
        font-size: 1.5rem;
        font-weight: bold;
        min-width: 30px;
        text-align: center;
      }

      .info-button {
        background: none;
        border: none;
        color: #333;
        font-weight: 700;
        text-decoration: underline;
        cursor: pointer;
        font-size: 1rem;
        padding: 5px;
      }
      .info-button:hover {
        color: #000;
      }

      /* --- Sort Container --- */
      .sort-container {
        max-width: 900px;
        margin: 0 auto 15px auto;
        padding: 0 20px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .sort-container label {
        margin-right: 10px;
        font-weight: 600;
        color: #555;
      }
      #sort-by {
        padding: 8px 12px;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: #f9f9f9;
        cursor: pointer;
      }

      /* 5. åº•éƒ¨æŠ½å±‰å¼å¼¹çª— (Mobile Bottom Sheet Modal) */
      @media (max-width: 767px) {
        .modal {
          align-items: flex-end; /* å†…å®¹é åº•éƒ¨å¯¹é½ */
          padding: 0; /* ç§»é™¤å†…è¾¹è· */
        }
        .modal-content {
          width: 100%;
          max-width: 100%; /* å æ»¡å®½åº¦ */
          border-radius: 20px 20px 0 0; /* åªæœ‰ä¸Šæ–¹æœ‰åœ†è§’ */
          margin: 0;
          max-height: 85vh; /* æœ€å¤§é«˜åº¦é™åˆ¶ */
          animation: slideUp 0.3s ease-out; /* æ»‘å‡ºåŠ¨ç”» */
          padding-bottom: 30px; /* åº•éƒ¨ç»™ iPhone Homeæ¡ç•™ç‚¹ç©ºé—´ */
        }
        .modal-content img {
          max-height: 50vh;
          width: 100%;
          object-fit: contain;
          background: #f9f9f9;
        }
        @keyframes slideUp {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .modal-close {
          top: 10px;
          right: 15px;
          color: #333;
          background: rgba(255, 255, 255, 0.8);
          width: 30px;
          height: 30px;
          border-radius: 50%;
          text-align: center;
          line-height: 30px;
        }

        /* ç§»åŠ¨ç«¯è°ƒæ•´å›åˆ°é¡¶éƒ¨æŒ‰é’®ä½ç½®ï¼Œé¿å…å’Œè´­ç‰©è½¦é‡å  */
        .back-to-top {
          bottom: 35px;
          left: 20px;
          right: auto;
          width: 45px;
          height: 45px;
          line-height: 45px;
          font-size: 1.2rem;
          opacity: 0.7;
        }
        /* æ¨ªå‘æ»‘åŠ¨å®¹å™¨ */
        .top-scroll-wrapper {
          display: flex;
          overflow-x: auto;
          gap: 15px;
          padding: 10px 15px;
          -webkit-overflow-scrolling: touch; /* iOSé¡ºæ»‘æ»šåŠ¨ */
          scrollbar-width: none; /* Firefox éšè—æ»šåŠ¨æ¡ */
        }
        .top-scroll-wrapper::-webkit-scrollbar {
          display: none; /* Chrome éšè—æ»šåŠ¨æ¡ */
        }

        /* æ¨ªå‘å¡ç‰‡æ ·å¼ (æ¯”ä¸»åˆ—è¡¨çš„å¡ç‰‡ç¨å¾®å°ä¸€ç‚¹/ä¸åŒä¸€ç‚¹) */
        .top-card {
          flex: 0 0 140px; /* å›ºå®šå®½åº¦ï¼Œæ‰‹æœºä¸Šä¸€å±å¤§æ¦‚çœ‹2.5ä¸ª */
          background: #fff;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          overflow: hidden;
          position: relative;
          border: 1px solid #f0f0f0;
        }
        .top-card img {
          width: 100%;
          height: 140px;
          object-fit: cover;
          background: #f9f9f9;
        }
        .top-card .top-info {
          padding: 8px;
          text-align: center;
        }
        .top-card .top-name {
          font-size: 0.8rem;
          font-weight: bold;
          margin-bottom: 4px;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis; /* æ–‡å­—å¤ªé•¿æ˜¾ç¤ºçœç•¥å· */
        }
        .top-card .top-price {
          color: #d9534f;
          font-weight: 800;
          font-size: 0.9rem;
        }
        /* çˆ†æ¬¾æ ‡ç­¾ */
        .hot-badge {
          position: absolute;
          top: 5px;
          left: 5px;
          background: #ff3b30;
          color: white;
          font-size: 0.6rem;
          padding: 2px 6px;
          border-radius: 4px;
          font-weight: bold;
          z-index: 2;
        }
      }
    </style>
  </head>
  <body>
    <h2 class="TOP">Perfume List</h2>

    <div class="price-info">
      <div>
        <p style="font-size: 1.1rem; font-weight: 700">Perfuems: From $30</p>
        <p style="font-size: 1.1rem; font-weight: 600">
          Free Shipping | Buy more save more !
        </p>
        <p style="font-size: 1.1rem; font-weight: 700">USA WAREHOUSE</p>
        <p style="font-size: 0.9rem; color: #555">
          (Total price is shown on shopping cart)
        </p>
      </div>
      <hr class="info-divider" />

      <div style="margin-top: 15px">
        <button id="policy-btn" class="info-button" style="color: #f44">
          Compensation Policy
        </button>
      </div>
    </div>

    <div class="search-container">
      <input
        type="search"
        id="search-input"
        placeholder="Search by name, brand or number..."
      />
      <button id="search-clear-btn" title="Clear search">&times;</button>
    </div>

    <div class="sort-container">
      <label for="sort-by">Sort By:</label>
      <select id="sort-by">
        <option value="default">Default (A-Z)</option>
        <option value="newest">Newest First</option>
        <option value="price-asc">Price: Low to High</option>
        <option value="price-desc">Price: High to Low</option>
      </select>
    </div>

    <div class="navbar" id="brand-navbar">
      <button data-brand="All" class="active" aria-pressed="true">
        All Brands
      </button>
      <button data-brand="Dior" aria-pressed="false">Dior</button>
      <button data-brand="Chanel" aria-pressed="false">Chanel</button>
      <button data-brand="Yves Saint Laurent" aria-pressed="false">
        Yves Saint Laurent
      </button>
      <button data-brand="Louis Vuitton" aria-pressed="false">
        Louis Vuitton
      </button>
      <button data-brand="Tom Ford" aria-pressed="false">Tom Ford</button>
      <button data-brand="Gucci" aria-pressed="false">Gucci</button>
      <button data-brand="Valentino" aria-pressed="false">Valentino</button>
      <button data-brand="Prada" aria-pressed="false">Prada</button>
      <button data-brand="Versace" aria-pressed="false">Versace</button>
      <button data-brand="Creed" aria-pressed="false">Creed</button>
      <button data-brand="Xerjoff" aria-pressed="false">Xerjoff</button>
      <button data-brand="Kayali" aria-pressed="false">Kayali</button>
      <button data-brand="Initio" aria-pressed="false">Initio</button>
      <button data-brand="Jean Paul Gaultier" aria-pressed="false">
        Jean Paul Gaultier
      </button>
      <button data-brand="Maison Francis Kurkdjian" aria-pressed="false">
        Maison Francis Kurkdjian
      </button>
      <button data-brand="Parfums de Marly" aria-pressed="false">
        Parfums de Marly
      </button>
      <button data-brand="Giorgio Armani" aria-pressed="false">Armani</button>
      <button data-brand="Carolina Herrera" aria-pressed="false">
        Carolina Herrera
      </button>
      <button data-brand="Lattafa" aria-pressed="false">Lattafa</button>
      <button data-brand="Azzaro" aria-pressed="false">Azzaro</button>
      <button data-brand="Paco Rabanne" aria-pressed="false">
        Paco Rabanne
      </button>
      <button data-brand="Other" aria-pressed="false">Other Brands</button>
    </div>
    <div
      id="top-picks-container"
      style="display: none; max-width: 1200px; margin: 0 auto"
    >
      <h3 style="padding: 0 15px; margin-bottom: 10px; font-size: 1.1rem">
        ğŸ”¥ Best Sellers
      </h3>
      <div class="top-scroll-wrapper" id="top-gallery"></div>
      <hr style="margin: 20px 15px; border: 0; border-top: 1px solid #eee" />
    </div>
    <div class="gallery" id="gallery">
      <div class="gallery-loader"></div>
    </div>

    <div
      class="modal"
      id="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-caption"
    >
      <div class="modal-close" id="modal-close" aria-label="Close modal">
        &times;
      </div>
      <div class="modal-content">
        <img src="" alt="" id="modal-img" />
        <div class="modal-caption" id="modal-caption"></div>
        <div class="modal-controls">
          <button class="modal-add-btn">Add to Cart</button>
          <div class="modal-qty-controls">
            <button class="modal-qty-btn" data-action="decrease">-</button>
            <span class="modal-qty-count">1</span>
            <button class="modal-qty-btn" data-action="increase">+</button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal"
      id="policy-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="policy-modal-caption"
    >
      <div class="modal-close" id="policy-modal-close" aria-label="Close modal">
        &times;
      </div>
      <div
        class="modal-content"
        style="
          max-width: 500px;
          text-align: left;
          padding: 25px;
          box-sizing: border-box;
        "
      >
        <h3
          id="policy-modal-caption"
          style="text-align: center; margin-top: 0; font-size: 1.4rem"
        >
          Compensation Policy
        </h3>
        <p style="font-size: 1rem; color: #333">
          Please check your items upon delivery. If you have any issues, follow
          these steps for a free reshipment:
        </p>
        <ul style="padding-left: 20px; font-size: 1rem">
          <li style="margin-bottom: 15px">
            <strong>1. Leaked or Damaged:</strong>
            <p style="margin-top: 5px; margin-bottom: 0">
              Provide photos of:
              <strong>Outer Packaging + Shipping Label + Damaged Goods</strong>.
            </p>
          </li>
          <li>
            <strong>2. Wrong Product Sent:</strong>
            <p style="margin-top: 5px; margin-bottom: 0">
              Provide photos of:
              <strong>Shipping Label + Incorrect Goods</strong>.
            </p>
          </li>
        </ul>
        <p
          style="
            font-weight: bold;
            text-align: center;
            margin-top: 25px;
            font-size: 1rem;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
          "
        >
          Important: Please keep all shipping packaging until you've checked
          that everything is okay with your order. An unboxing video is highly
          recommended.
        </p>
      </div>
    </div>

    <div
      class="modal"
      id="receipt-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="receipt-modal-caption"
    >
      <div
        class="modal-close"
        id="receipt-modal-close"
        aria-label="Close modal"
      >
        &times;
      </div>
      <div
        class="modal-content"
        style="
          max-width: 600px; /* æ‚¨å¯ä»¥è°ƒæ•´å›¾ç‰‡å¼¹çª—çš„æœ€å¤§å®½åº¦ */
          text-align: center;
          padding: 0;
          overflow: hidden;
          background: #fff;
        "
      >
        <img
          src="images/receipt.webp"
          alt="Receipt Example"
          style="
            max-width: 100%;
            height: auto;
            display: block;
            max-height: 85vh;
          "
        />
        <div
          id="receipt-modal-caption"
          style="
            padding: 12px;
            font-weight: bold;
            background: #fff;
            color: #222;
          "
        >
          Example Receipt
        </div>
      </div>
    </div>
    <footer>
      <div class="contact-info">
        <a href="https://wa.me/16232027321"
          >Need help? Contact us on WhatsApp</a
        >
        <p>We are available 24/7</p>
      </div>
    </footer>

    <button id="back-to-top" class="back-to-top" aria-label="Back to top">
      &#x25B2;
    </button>

    <button
      class="cart-button"
      id="cart-button"
      title="View Your Order"
      aria-label="View Shopping Cart"
    >
      <img src="icon/order.png" alt="Cart" class="cart-icon" />
      <span id="cart-count" class="cart-count">0</span>
    </button>

    <script>
      // =================================================================
      // å…¨å±€å˜é‡å®šä¹‰ (Global Variables)
      // =================================================================
      let currentBrandFilter = "all";
      let currentSupplierFilter = "all";
      let searchTerm = "";
      let cartItems = [];

      // DOM å…ƒç´ å˜é‡ (å°†åœ¨ DOMContentLoaded ä¸­èµ‹å€¼)
      let perfumeList, searchInput, searchClearBtn, cartButton, cartCount; // æ”¹å: clearSearchButton -> searchClearBtn
      let brandNavbar, allBrandButtons, showAllButton, supplierButtons, gallery; // æ”¹å: brandButtons -> allBrandButtons
      let sortBy;

      // =================================================================
      // 1. å®šä¹‰å…¨å±€æ¸²æŸ“å…¥å£ (ä¾› db.js è°ƒç”¨)
      // =================================================================
      // =================================================================
      // 1. å®šä¹‰å…¨å±€æ¸²æŸ“å…¥å£ (ä¾› db.js è°ƒç”¨) - å·²æ•´åˆ Top 6 çˆ†æ¬¾åŒºé€»è¾‘
      // =================================================================
      window.renderPerfumes = function () {
        const db = window.perfumeDB || [];
        // å¦‚æœ DOM è¿˜æ²¡å‡†å¤‡å¥½ï¼Œæˆ–è€… db.js æ•°æ®è¿˜æ²¡å‡†å¤‡å¥½ï¼Œæš‚æ—¶ä¸æ¸²æŸ“
        if (!gallery) return;

        // === 1. æ¸²æŸ“ Top Picks (æ–°å¢éƒ¨åˆ†: çˆ†æ¬¾åŒº) ===
        const topContainer = document.getElementById("top-picks-container");
        const topGallery = document.getElementById("top-gallery");

        // ç­›é€‰å‡ºè¡¨æ ¼é‡Œ top åˆ—ä¸º 1 çš„äº§å“ (å…¼å®¹å­—ç¬¦ä¸² "1" å’Œæ•°å­— 1)
        const topItems = db.filter((p) => p.top == 1);

        if (topContainer && topGallery) {
          if (topItems.length > 0) {
            topContainer.style.display = "block";
            topGallery.innerHTML = ""; // æ¸…ç©ºæ—§å†…å®¹

            topItems.forEach((p) => {
              const el = document.createElement("div");
              el.className = "top-card";
              // ç‚¹å‡»äº‹ä»¶ï¼šæ¨¡æ‹Ÿç‚¹å‡»ä¸»åˆ—è¡¨é‡Œçš„å•†å“æ¥è§¦å‘å¼¹çª—
              el.onclick = (e) => {
                const mainItem = document.querySelector(
                  `.item[data-name="${p.id}"]`
                );
                if (mainItem) mainItem.click();
              };

              el.innerHTML = `
                   <div class="hot-badge">HOT</div>
                   <img src="${p.img}" loading="lazy">
                   <div class="top-info">
                     <div class="top-name">${p.name}</div>
                     <div class="top-price">$${p.price}</div>
                   </div>
                 `;
              topGallery.appendChild(el);
            });
          } else {
            topContainer.style.display = "none";
          }
        }

        // === 2. æ¸²æŸ“ä¸»åˆ—è¡¨ (åŸæœ‰é€»è¾‘) ===
        // è°ƒç”¨åŸæœ¬çš„è¿‡æ»¤å’Œæœç´¢é€»è¾‘ï¼Œå®ƒä¼šè´Ÿè´£æœ€ç»ˆçš„ä¸»åˆ—è¡¨æ¸²æŸ“
        if (typeof window.applyLastState === "function") {
          window.applyLastState();
        } else if (typeof window.filterAndSearch === "function") {
          window.filterAndSearch();
        }
      };

      document.addEventListener("DOMContentLoaded", () => {
        // --- åˆå§‹åŒ– DOM å…ƒç´  ---
        perfumeList = document.getElementById("gallery");
        gallery = document.getElementById("gallery");
        searchInput = document.getElementById("search-input");
        searchClearBtn = document.getElementById("search-clear-btn"); // ä¿®æ­£å˜é‡å
        cartButton = document.getElementById("cart-button");
        cartCount = document.getElementById("cart-count");
        brandNavbar = document.getElementById("brand-navbar");
        sortBy = document.getElementById("sort-by");

        // æŒ‰é’®ç»„
        allBrandButtons = document.querySelectorAll(
          ".navbar button[data-brand]"
        ); // ä¿®æ­£å˜é‡å
        showAllButton = document.querySelector(
          ".navbar button[data-brand='All']"
        );
        supplierButtons = document.querySelectorAll(".supplier-btn"); // ç¡®ä¿å¦‚æœæœ‰ä¾›åº”å•†æŒ‰é’®ä¹Ÿèƒ½è·å–åˆ°

        // =================================================================
        // æ–¹æ¡ˆ 1: å“ç‰Œæ è‡ªåŠ¨æ»‘åŠ¨æç¤º
        // =================================================================
        if (brandNavbar) {
          setTimeout(() => {
            brandNavbar.scrollTo({ left: 60, behavior: "smooth" });
            setTimeout(() => {
              brandNavbar.scrollTo({ left: 0, behavior: "smooth" });
            }, 800);
          }, 1000);

          // âœ¨ PC ç«¯é¼ æ ‡æ‹–æ‹½æ»šåŠ¨æ”¯æŒ
          let isDown = false;
          let startX;
          let scrollLeft;

          brandNavbar.addEventListener("mousedown", (e) => {
            isDown = true;
            brandNavbar.classList.add("active");
            startX = e.pageX - brandNavbar.offsetLeft;
            scrollLeft = brandNavbar.scrollLeft;
            e.preventDefault(); // é˜²æ­¢æ‹–åŠ¨æ—¶é€‰ä¸­æ–‡å­—
          });
          brandNavbar.addEventListener("mouseleave", () => {
            isDown = false;
          });
          brandNavbar.addEventListener("mouseup", () => {
            isDown = false;
          });
          brandNavbar.addEventListener("mousemove", (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - brandNavbar.offsetLeft;
            const walk = (x - startX) * 2;
            brandNavbar.scrollLeft = scrollLeft - walk;
          });
        }

        const config = {
          whatsappNumber: "16232027321",
          brandAliases: {
            ysl: "yves saint laurent",
            lv: "Louis Vuitton",
            tf: "tom ford",
            jpg: "jean paul gaultier",
            mfk: "maison francis kurkdjian",
            pdm: "parfums de marly",
            ch: "carolina herrera",
            ga: "giorgio armani",
          },
        };

        const { whatsappNumber, brandAliases } = config;

        // --- Modal å…ƒç´  ---
        const modal = document.getElementById("modal");
        const modalImg = document.getElementById("modal-img");
        const modalCaption = document.getElementById("modal-caption");
        const modalClose = document.getElementById("modal-close");
        const backToTopButton = document.getElementById("back-to-top");

        const modalControls = document.querySelector(".modal-controls");
        const modalAddBtn = document.querySelector(".modal-add-btn");
        const modalQtyControls = document.querySelector(".modal-qty-controls");
        const modalQtyCount = document.querySelector(".modal-qty-count");
        let currentModalProductId = null;

        // --- Policy & Receipt Modals ---
        const policyBtn = document.getElementById("policy-btn");
        const policyModal = document.getElementById("policy-modal");
        const policyModalClose = document.getElementById("policy-modal-close");
        const receiptBtn = document.getElementById("receipt-btn");
        const receiptModal = document.getElementById("receipt-modal");
        const receiptModalClose = document.getElementById(
          "receipt-modal-close"
        );

        // =================================================================
        // æ ¸å¿ƒé€»è¾‘å‡½æ•°
        // =================================================================

        // æ¸²æŸ“ç”»å»Š (æ¥æ”¶è¿‡æ»¤åçš„åˆ—è¡¨)
        function renderGallery(perfumeListToRender) {
          gallery.innerHTML = "";

          // å¦‚æœæ•°æ®ä¸ºç©ºï¼Œæ˜¾ç¤º Loading æˆ– ç©ºçŠ¶æ€
          const db = window.perfumeDB || [];
          if (db.length === 0) {
            gallery.innerHTML = '<div class="gallery-loader"></div>';
            return;
          }

          if (perfumeListToRender.length === 0) {
            handleNoResults();
            return;
          }

          perfumeListToRender.forEach((perfume) => {
            const item = document.createElement("div");
            item.className = "item";
            item.tabIndex = 0;
            item.dataset.name = perfume.id;
            item.dataset.img = perfume.img;
            item.dataset.brand = perfume.brand;

            const stockVal = Number(perfume.stock);
            item.dataset.stock = stockVal;

            let tierBadge = "";
            let displayName = perfume.name;

            if (perfume.tier === "Premium") {
              tierBadge = '<span class="premium-badge">â˜… Premium</span>';
              displayName = displayName.replace(
                "Premium (Luxe)",
                '<span class="premium-text">Premium (Luxe)</span>'
              );
            }

            item.innerHTML = `
                        ${tierBadge}
                        <img src="${perfume.img}" alt="${perfume.id} - ${perfume.name}" loading="lazy" decoding="async"/>
                        <div class="caption">
                          ${perfume.id} - ${displayName} <strong style="display: block; color: #333; font-size: 1.1rem; margin-top: 5px;">
                            $${perfume.price}
                          </strong>
                        </div>
                        <button class="add-to-cart" title="Add to Cart" aria-label="Add ${perfume.id} to cart">
                          ğŸ›’ <span class="item-cart-count"></span>
                        </button>
                    `;
            gallery.appendChild(item);
          });

          items = Array.from(gallery.querySelectorAll(".item"));
          renderItemCounts();
        }

        // è¿‡æ»¤å’Œæœç´¢ (æ ¸å¿ƒå…¥å£)
        window.filterAndSearch = function () {
          // 1. è·å–æ•°æ®æº (ä» window.perfumeDB è·å–)
          const db = window.perfumeDB || [];
          if (db.length === 0) {
            renderGallery([]); // è§¦å‘ Loading çŠ¶æ€
            return;
          }

          const activeBrandBtn = brandNavbar.querySelector("button.active");
          const selectedBrand = activeBrandBtn
            ? activeBrandBtn.dataset.brand
            : "All";
          const selectedSort = sortBy ? sortBy.value : "default";

          let term = searchInput.value.toLowerCase().trim();
          if (brandAliases[term]) {
            term = brandAliases[term];
          }

          // 2. è¿‡æ»¤
          const dedicatedBrands = [
            "Dior",
            "Chanel",
            "Yves Saint Laurent",
            "Louis Vuitton",
            "Tom Ford",
            "Gucci",
            "Valentino",
            "Prada",
            "Versace",
            "Creed",
            "Xerjoff",
            "Kayali",
            "Initio",
            "Jean Paul Gaultier",
            "Maison Francis Kurkdjian",
            "Parfums de Marly",
            "Giorgio Armani",
            "Carolina Herrera",
            "Lattafa",
            "Azzaro",
            "Paco Rabanne",
          ];

          let filteredList = db.filter((p) => {
            // Brand Filter
            let brandMatch = true;
            if (selectedBrand !== "All") {
              if (selectedBrand === "Other") {
                brandMatch = !dedicatedBrands.includes(p.brand);
              } else {
                brandMatch = p.brand === selectedBrand;
              }
            }

            // Search Filter
            let searchMatch = true;
            if (term) {
              const nameStr = p.name ? String(p.name).toLowerCase() : "";
              const idStr = p.id ? String(p.id).toLowerCase() : "";
              const brandStr = p.brand ? String(p.brand).toLowerCase() : "";
              searchMatch =
                nameStr.includes(term) ||
                idStr.includes(term) ||
                brandStr.includes(term);
            }

            return brandMatch && searchMatch;
          });

          // 3. æ’åº
          filteredList = filteredList.slice();
          if (selectedSort === "price-asc") {
            filteredList.sort((a, b) => Number(a.price) - Number(b.price));
          } else if (selectedSort === "price-desc") {
            filteredList.sort((a, b) => Number(b.price) - Number(a.price));
          } else if (selectedSort === "newest") {
            filteredList.reverse();
          }

          renderGallery(filteredList);

          localStorage.setItem("lastFilterBrand", selectedBrand);
          localStorage.setItem("lastSearchTerm", searchInput.value.trim());
          localStorage.setItem("lastSort", selectedSort);
        };

        // æ¢å¤ä¸Šæ¬¡çŠ¶æ€
        window.applyLastState = function () {
          const lastBrand = localStorage.getItem("lastFilterBrand") || "All";
          const lastSearch = localStorage.getItem("lastSearchTerm") || "";
          const lastSort = localStorage.getItem("lastSort") || "default";

          if (sortBy) sortBy.value = lastSort;

          if (lastSearch) {
            searchInput.value = lastSearch;
            // ä¿®å¤å˜é‡å: clearSearchButton -> searchClearBtn
            if (searchClearBtn) searchClearBtn.style.display = "flex";
          } else {
            searchInput.value = "";
            // ä¿®å¤å˜é‡å
            if (searchClearBtn) searchClearBtn.style.display = "none";

            // æ¢å¤å“ç‰ŒæŒ‰é’®çŠ¶æ€
            let brandApplied = false;
            if (allBrandButtons) {
              // ä¿®å¤å˜é‡å
              allBrandButtons.forEach((btn) => {
                const isMatch = btn.dataset.brand === lastBrand;
                btn.classList.toggle("active", isMatch);
                btn.setAttribute("aria-pressed", isMatch);
                if (isMatch) brandApplied = true;
              });
            }
            if (!brandApplied && showAllButton) {
              showAllButton.classList.add("active");
              showAllButton.setAttribute("aria-pressed", "true");
            }
          }

          window.filterAndSearch();
        };

        // --- è´­ç‰©è½¦é€»è¾‘ ---
        function loadCartFromLocalStorage() {
          const storedCart = localStorage.getItem("perfumeCart");
          cartItems = storedCart ? JSON.parse(storedCart) : [];
        }

        function saveCartToLocalStorage() {
          localStorage.setItem("perfumeCart", JSON.stringify(cartItems));
        }

        function updateCartCount() {
          const count = cartItems.reduce(
            (total, item) => total + item.quantity,
            0
          );
          cartCount.textContent = count;
        }

        function renderItemCounts() {
          // åªæœ‰å½“ gallery æœ‰å†…å®¹æ—¶æ‰è¿è¡Œ
          const currentItems = gallery.querySelectorAll(".item");
          currentItems.forEach((item) => {
            const itemName = item.dataset.name;
            const itemCartCountBadge = item.querySelector(".item-cart-count");
            const itemInCart = cartItems.find(
              (cartItem) => cartItem.name === itemName
            );
            if (itemInCart && itemInCart.quantity > 0) {
              itemCartCountBadge.textContent = itemInCart.quantity;
              itemCartCountBadge.style.display = "block";
            } else {
              itemCartCountBadge.style.display = "none";
            }
          });
        }

        function addItemToCart(productId) {
          // ä» window.perfumeDB æŸ¥æ‰¾æ•°æ®
          const db = window.perfumeDB || [];
          const perfumeData = db.find((p) => p.id === productId);
          if (!perfumeData) return;

          const { id, name, img, price, tier } = perfumeData;
          const existingItem = cartItems.find(
            (cartItem) => cartItem.name === id
          );

          if (existingItem) {
            existingItem.quantity++;
          } else {
            cartItems.push({
              name: id,
              caption: `${id} - ${name}`,
              img,
              quantity: 1,
              price: Number(price),
              tier: tier,
              // ä¿å­˜ sku å’Œ supplier ä»¥ä¾¿è´­ç‰©è½¦é¡µé¢ä½¿ç”¨
              sku: perfumeData.sku,
              supplier: perfumeData.supplier,
            });
          }
          saveCartToLocalStorage();
          updateCartCount();
          renderItemCounts();
          pulseCartButton();
        }

        // --- è¾…åŠ©åŠŸèƒ½ ---
        function handleNoResults() {
          let messageEl = gallery.querySelector(".no-results-message");
          if (!messageEl) {
            messageEl = document.createElement("div");
            messageEl.className = "no-results-message";
            gallery.appendChild(messageEl);
          }
          let searchTerm = searchInput.value;
          messageEl.innerHTML = searchTerm
            ? `<p>No results found for "<strong>${searchTerm}</strong>".</p><p>Try another keyword.</p>`
            : `<p>No items found for this filter.</p>`;
        }

        function pulseCartButton() {
          cartButton.classList.add("added");
          setTimeout(() => cartButton.classList.remove("added"), 600);
        }

        function showConfirmation(button) {
          const confirmation = document.createElement("div");
          confirmation.textContent = "Added!";
          confirmation.className = "add-to-cart-confirmation";
          const itemElement = button.closest(".item");
          itemElement.appendChild(confirmation);
          setTimeout(() => confirmation.classList.add("show"), 10);
          setTimeout(() => confirmation.remove(), 1500);
        }

        // --- äº‹ä»¶ç›‘å¬ç»‘å®š ---

        // 1. å“ç‰Œç‚¹å‡»
        if (brandNavbar) {
          brandNavbar.addEventListener("click", (e) => {
            const button = e.target.closest("button[data-brand]");
            if (!button) return;

            // ä¿®å¤å˜é‡å: brandButtons -> allBrandButtons
            if (allBrandButtons) {
              allBrandButtons.forEach((btn) => {
                btn.classList.remove("active");
                btn.setAttribute("aria-pressed", "false");
              });
            }
            button.classList.add("active");
            button.setAttribute("aria-pressed", "true");

            // --- è‡ªåŠ¨æ»šåŠ¨ ---
            const scrollLeft = button.offsetLeft - 15;
            brandNavbar.scrollTo({
              left: scrollLeft,
              behavior: "smooth",
            });

            searchInput.value = "";
            // ä¿®å¤å˜é‡å
            if (searchClearBtn) searchClearBtn.style.display = "none";
            window.filterAndSearch();
          });
        }

        // 2. æœç´¢è¾“å…¥
        if (searchInput) {
          searchInput.addEventListener("input", () => {
            // ä¿®å¤å˜é‡å
            if (allBrandButtons) {
              allBrandButtons.forEach((btn) => {
                const isAll = btn.dataset.brand === "All";
                btn.classList.toggle("active", isAll);
                btn.setAttribute("aria-pressed", isAll);
              });
            }
            // ä¿®å¤å˜é‡å
            if (searchClearBtn)
              searchClearBtn.style.display = searchInput.value
                ? "flex"
                : "none";
            window.filterAndSearch();
          });
        }

        // ä¿®å¤å˜é‡å
        if (searchClearBtn) {
          searchClearBtn.addEventListener("click", () => {
            searchInput.value = "";
            searchInput.dispatchEvent(new Event("input"));
          });
        }

        // 3. æ’åºæ”¹å˜
        if (sortBy) {
          sortBy.addEventListener("change", window.filterAndSearch);
        }

        // 4. è´­ç‰©è½¦ç‚¹å‡»
        if (cartButton) {
          cartButton.addEventListener("click", () => {
            window.location.href = "cart.html";
          });
        }

        // 5. ç”»å»Šç‚¹å‡» (åŠ å…¥è´­ç‰©è½¦ / æ‰“å¼€å¼¹çª—)
        if (gallery) {
          gallery.addEventListener("click", function (e) {
            const addToCartBtn = e.target.closest(".add-to-cart");
            if (addToCartBtn) {
              e.stopPropagation();
              const item = addToCartBtn.closest(".item");
              addItemToCart(item.dataset.name);
              showConfirmation(addToCartBtn);
              return;
            }

            const item = e.target.closest(".item");
            if (item) {
              currentModalProductId = item.dataset.name;
              modalImg.src = item.dataset.img;
              modalImg.alt = item.querySelector(".caption").textContent;
              modalCaption.innerHTML = item.querySelector(".caption").innerHTML;
              updateModalControls(currentModalProductId);
              modal.classList.add("open");
            }
          });
        }

        // 6. å¼¹çª—å†…æ“ä½œ
        function updateModalControls(productId) {
          const itemInCart = cartItems.find(
            (cartItem) => cartItem.name === productId
          );
          if (itemInCart && itemInCart.quantity > 0) {
            modalAddBtn.style.display = "none";
            modalQtyControls.style.display = "flex";
            modalQtyCount.textContent = itemInCart.quantity;
          } else {
            modalAddBtn.style.display = "block";
            modalQtyControls.style.display = "none";
          }
        }

        if (modalControls) {
          modalControls.addEventListener("click", (e) => {
            const target = e.target;
            if (target.matches(".modal-add-btn")) {
              addItemToCart(currentModalProductId);
              updateModalControls(currentModalProductId);
            }
            const button = target.closest(".modal-qty-btn");
            if (button) {
              const action = button.dataset.action;
              const itemInCart = cartItems.find(
                (item) => item.name === currentModalProductId
              );
              if (!itemInCart) return;

              if (action === "increase") itemInCart.quantity++;
              else if (action === "decrease") itemInCart.quantity--;

              if (itemInCart.quantity <= 0) {
                const idx = cartItems.findIndex(
                  (item) => item.name === currentModalProductId
                );
                if (idx > -1) cartItems.splice(idx, 1);
              }
              saveCartToLocalStorage();
              updateCartCount();
              renderItemCounts();
              updateModalControls(currentModalProductId);
              pulseCartButton();
            }
          });
        }

        if (modalClose)
          modalClose.addEventListener("click", () =>
            modal.classList.remove("open")
          );
        if (modal) {
          modal.addEventListener("click", (e) => {
            if (e.target === modal) modal.classList.remove("open");
          });
        }

        // Escå…³é—­å¼¹çª—
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            if (modal) modal.classList.remove("open");
            if (policyModal) policyModal.classList.remove("open");
            if (receiptModal) receiptModal.classList.remove("open");
          }
        });

        // å…¶ä»–å¼¹çª—é€»è¾‘
        if (policyBtn && policyModal && policyModalClose) {
          policyBtn.addEventListener("click", () =>
            policyModal.classList.add("open")
          );
          policyModalClose.addEventListener("click", () =>
            policyModal.classList.remove("open")
          );
          policyModal.addEventListener("click", (e) => {
            if (e.target === policyModal) policyModal.classList.remove("open");
          });
        }
        if (receiptBtn && receiptModal && receiptModalClose) {
          receiptBtn.addEventListener("click", () =>
            receiptModal.classList.add("open")
          );
          receiptModalClose.addEventListener("click", () =>
            receiptModal.classList.remove("open")
          );
          receiptModal.addEventListener("click", (e) => {
            if (e.target === receiptModal)
              receiptModal.classList.remove("open");
          });
        }

        // å›åˆ°é¡¶éƒ¨
        window.addEventListener("scroll", () => {
          if (window.pageYOffset > 300) {
            if (backToTopButton) backToTopButton.style.display = "block";
          } else {
            if (backToTopButton) backToTopButton.style.display = "none";
          }
        });
        if (backToTopButton) {
          backToTopButton.addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
          });
        }

        // --- åˆå§‹åŒ– ---
        loadCartFromLocalStorage();
        updateCartCount();

        // å…ˆå°è¯•æ¢å¤çŠ¶æ€ (è¿™ä¼šè§¦å‘ä¸€æ¬¡æ¸²æŸ“, å¦‚æœ db.js è¿˜æ²¡å¥½, ä¼šæ˜¾ç¤º Loading)
        // è¿™é‡Œçš„ renderPerfumes ä¼šæ£€æŸ¥ gallery æ˜¯å¦å­˜åœ¨
        window.applyLastState();
      });
    </script>
    <script src="db.js"></script>
  </body>
</html>
